<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research App - –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ -->
    <script>
        const settings = JSON.parse(localStorage.getItem('settings') || '{}');
        if (settings.darkTheme) {
            document.body.classList.add('dark-theme');
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        if (!localStorage.getItem('currentUser')) {
            window.location.href = 'index.html';
        }
    </script>

    <!-- –®–∞–ø–∫–∞ -->
    <header class="header">
        <button class="icon-btn" onclick="toggleSettings()">
            <i class="fas fa-cog"></i>
        </button>

        <div class="header-title">
            <h1>–ì–ª–∞–≤–Ω–∞—è</h1>
        </div>

        <div class="profile-icon" id="profileIcon" onclick="showProfileMenu()">
            <!-- –ê–≤–∞—Ç–∞—Ä –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ JS -->
        </div>

        <!-- –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è -->
        <div class="profile-menu" id="profileMenu" style="display: none;">
            <div class="profile-info">
                <div class="profile-avatar" id="profileAvatar"></div>
                <div class="profile-details">
                    <h4 id="profileName"></h4>
                    <p id="profileEmail"></p>
                </div>
            </div>
            <div class="profile-actions">
                <a href="settings.html" class="profile-action-item">
                    <i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </a>
                <button class="profile-action-item" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
                </button>
            </div>
        </div>
    </header>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="tabs">
        <button class="tab active" onclick="showProjects()">–≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</button>
        <button class="tab" onclick="showTasks()">–º–æ–∏ –∑–∞–¥–∞—á–∏</button>
        <button class="tab" onclick="showDeadlines()">–¥–µ–¥–ª–∞–π–Ω—ã</button>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ - –ü—Ä–æ–µ–∫—Ç—ã -->
    <main class="container" id="projectsSection">
        <div class="empty-state" id="projectsContainer">
            <div class="empty-icon">
                <i class="fas fa-folder-open"></i>
            </div>
            <h2>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤</h2>
            <p>–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç</p>

            <a href="create-project.html" class="btn btn-primary create-project-btn">
                <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
            </a>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ -->
        <div class="projects-grid" id="projectsGrid" style="display: none;">
            <!-- –ü—Ä–æ–µ–∫—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>
    </main>

    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ - –ú–æ–∏ –∑–∞–¥–∞—á–∏ -->
    <main class="container tasks-page" id="tasksSection" style="display: none;">
        <div class="tasks-header">
            <h2>–º–æ–∏ –∑–∞–¥–∞—á–∏</h2>
            <div class="filter-buttons">
                <button class="filter-btn active" onclick="filterTasks('all')">–í—Å–µ</button>
                <button class="filter-btn" onclick="filterTasks('today')">–°–µ–≥–æ–¥–Ω—è</button>
                <button class="filter-btn" onclick="filterTasks('week')">–ù–µ–¥–µ–ª—è</button>
            </div>
        </div>

        <div class="tasks-list" id="tasksList">
            <!-- –ó–∞–¥–∞—á–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>

        <div class="empty-state" id="emptyTasks" style="display: none;">
            <div class="empty-icon">
                <i class="fas fa-tasks"></i>
            </div>
            <h2>–ù–µ—Ç –∑–∞–¥–∞—á</h2>
            <p>–°–æ–∑–¥–∞–π—Ç–µ –∑–∞–¥–∞—á–∏ –≤ –≤–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö</p>
        </div>
    </main>

    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ - –î–µ–¥–ª–∞–π–Ω—ã -->
    <main class="container deadlines-page" id="deadlinesSection" style="display: none;">
        <div class="deadlines-header">
            <h2>–º–æ–∏ –∑–∞–¥–∞—á–∏</h2>
            <h3 class="section-title">–¥–µ–¥–ª–∞–π–Ω—ã</h3>
        </div>

        <div class="deadlines-list" id="deadlinesList">
            <!-- –î–µ–¥–ª–∞–π–Ω—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>

        <div class="empty-state" id="emptyDeadlines" style="display: none;">
            <div class="empty-icon">
                <i class="far fa-calendar-times"></i>
            </div>
            <h2>–ù–µ—Ç –¥–µ–¥–ª–∞–π–Ω–æ–≤</h2>
            <p>–î–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–∞—á–∏ —Å –¥–µ–¥–ª–∞–π–Ω–∞–º–∏ –≤ –ø—Ä–æ–µ–∫—Ç—ã</p>
        </div>
    </main>

    <!-- –§—É—Ç–µ—Ä —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π -->
    <footer class="bottom-nav">
        <a href="dashboard.html" class="nav-item active">
            <i class="fas fa-home"></i>
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="chats.html" class="nav-item">
            <i class="fas fa-comments"></i>
            <span>–ß–∞—Ç—ã</span>
        </a>
        <a href="settings.html" class="nav-item">
            <i class="fas fa-user"></i>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </a>
    </footer>

    <!-- –§—É—Ç–µ—Ä —Å –∫–Ω–æ–ø–∫–æ–π —Å–æ–∑–¥–∞–Ω–∏—è -->
    <div class="footer-create">
        <button class="fab-btn" id="fabButton" onclick="handleFabClick()">
            <i class="fas fa-plus"></i>
        </button>
    </div>

    <script>
        // –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        let currentUser = null;
        let currentSection = 'projects';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            currentUser = JSON.parse(localStorage.getItem('currentUser'));

            if (currentUser) {
                updateProfileIcon();
                loadInitialData();
            }

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            generateSampleData();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–µ–∫—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            showProjects();

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            loadProjects();
            loadUserTasks();
            loadDeadlines();

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞–≤–∞—é—â–µ–π –∫–Ω–æ–ø–∫–∏
            updateFabButton();
        });

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function generateSampleData() {
            const projects = JSON.parse(localStorage.getItem('projects') || '[]');

            if (projects.length === 0 && currentUser) {
                // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã —Å —à–∞–±–ª–æ–Ω–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏
                const sampleProjects = [
                    {
                        id: 1,
                        name: "–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞",
                        field: "—Å–æ–∑–¥–∞–Ω–∏–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",
                        deadline: "2025-12-20",
                        admin: currentUser.email,
                        members: [
                            currentUser.firstName + ' ' + currentUser.lastName,
                            "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä",
                            "–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä",
                            "–°–µ—Ä–≥–µ–µ–≤ –°–µ—Ä–≥–µ–π",
                            "–ú–∏—Ö–∞–π–ª–æ–≤ –ú–∏—Ö–∞–∏–ª"
                        ],
                        sections: ["–∞–Ω–∞–ª–∏–∑", "—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞", "—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"],
                        tasks: [
                            {
                                id: 101,
                                title: "–Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞",
                                description: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",
                                deadline: "2025-12-15T20:25:00",
                                assignees: [currentUser.firstName + ' ' + currentUser.lastName, "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä"],
                                section: "—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞",
                                status: "in_progress",
                                priority: "high",
                                completed: false,
                                themes: ["—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞", "—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"],
                                updates: [
                                    {
                                        author: currentUser.firstName + ' ' + currentUser.lastName,
                                        date: "2025-11-10T10:30:00",
                                        text: "–ù–∞—á–∞–ª —Ä–∞–±–æ—Ç—É –Ω–∞–¥ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º"
                                    }
                                ],
                                files: []
                            },
                            {
                                id: 102,
                                title: "–∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π",
                                description: "–ò–∑—É—á–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∑–∞–∫–∞–∑—á–∏–∫–∞",
                                deadline: "2025-12-10",
                                assignees: ["–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä"],
                                section: "–∞–Ω–∞–ª–∏–∑",
                                status: "todo",
                                priority: "medium",
                                completed: false,
                                themes: ["–∞–Ω–∞–ª–∏–∑"],
                                updates: [],
                                files: []
                            },
                            {
                                id: 103,
                                title: "—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞",
                                description: "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞",
                                deadline: "2025-12-18",
                                assignees: ["–°–µ—Ä–≥–µ–µ–≤ –°–µ—Ä–≥–µ–π"],
                                section: "—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ",
                                status: "todo",
                                priority: "medium",
                                completed: false,
                                themes: ["—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"],
                                updates: [],
                                files: []
                            }
                        ],
                        progress: 33,
                        icon: "üíª",
                        created: "2025-11-01"
                    },
                    {
                        id: 2,
                        name: "–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",
                        field: "—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ iOS/Android",
                        deadline: "2025-12-25",
                        admin: currentUser.email,
                        members: [
                            currentUser.firstName + ' ' + currentUser.lastName,
                            "–ê–Ω—Ç–æ–Ω–æ–≤ –ê–Ω—Ç–æ–Ω",
                            "–î–º–∏—Ç—Ä–∏–µ–≤ –î–º–∏—Ç—Ä–∏–π",
                            "–ê–Ω–¥—Ä–µ–µ–≤ –ê–Ω–¥—Ä–µ–π"
                        ],
                        sections: ["–¥–∏–∑–∞–π–Ω", "—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞", "—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"],
                        tasks: [
                            {
                                id: 201,
                                title: "—Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∑–∞–π–Ω–∞",
                                description: "–î–∏–∑–∞–π–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",
                                deadline: "2025-12-18",
                                assignees: [currentUser.firstName + ' ' + currentUser.lastName],
                                section: "–¥–∏–∑–∞–π–Ω",
                                status: "in_progress",
                                priority: "high",
                                completed: false,
                                themes: ["–¥–∏–∑–∞–π–Ω", "—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞"],
                                updates: [],
                                files: []
                            },
                            {
                                id: 202,
                                title: "—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ API",
                                description: "–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",
                                deadline: "2025-12-22",
                                assignees: ["–ê–Ω—Ç–æ–Ω–æ–≤ –ê–Ω—Ç–æ–Ω"],
                                section: "—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞",
                                status: "todo",
                                priority: "medium",
                                completed: false,
                                themes: ["—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞"],
                                updates: [],
                                files: []
                            }
                        ],
                        progress: 25,
                        icon: "üì±",
                        created: "2025-11-05"
                    },
                    {
                        id: 3,
                        name: "–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö",
                        field: "–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—ã–Ω–∫–∞",
                        deadline: "2025-12-30",
                        admin: currentUser.email,
                        members: [
                            currentUser.firstName + ' ' + currentUser.lastName,
                            "–í–ª–∞–¥–∏–º–∏—Ä–æ–≤ –í–ª–∞–¥–∏–º–∏—Ä",
                            "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω"
                        ],
                        sections: ["—Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö", "–∞–Ω–∞–ª–∏–∑", "–æ—Ç—á–µ—Ç"],
                        tasks: [
                            {
                                id: 301,
                                title: "—Å–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏",
                                description: "–°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ä—ã–Ω–∫—É",
                                deadline: "2025-12-20",
                                assignees: [currentUser.firstName + ' ' + currentUser.lastName, "–í–ª–∞–¥–∏–º–∏—Ä–æ–≤ –í–ª–∞–¥–∏–º–∏—Ä"],
                                section: "—Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö",
                                status: "in_progress",
                                priority: "medium",
                                completed: false,
                                themes: ["–∞–Ω–∞–ª–∏–∑", "–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è"],
                                updates: [],
                                files: []
                            },
                            {
                                id: 302,
                                title: "–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ—Ç—á–µ—Ç–∞",
                                description: "–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞",
                                deadline: "2025-12-28",
                                assignees: ["–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω"],
                                section: "–æ—Ç—á–µ—Ç",
                                status: "todo",
                                priority: "low",
                                completed: false,
                                themes: ["–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è"],
                                updates: [],
                                files: []
                            }
                        ],
                        progress: 50,
                        icon: "üìä",
                        created: "2025-11-10"
                    }
                ];

                localStorage.setItem('projects', JSON.stringify(sampleProjects));
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
        function updateProfileIcon() {
            if (!currentUser) return;

            const profileIcon = document.getElementById('profileIcon');
            const profileAvatar = document.getElementById('profileAvatar');
            const profileName = document.getElementById('profileName');
            const profileEmail = document.getElementById('profileEmail');

            const avatarText = currentUser.firstName.charAt(0).toUpperCase() +
                              currentUser.lastName.charAt(0).toUpperCase();

            profileIcon.innerHTML = `
                <div class="avatar">
                    ${avatarText}
                </div>
            `;

            if (profileAvatar) {
                profileAvatar.textContent = avatarText;
            }

            if (profileName) {
                profileName.textContent = currentUser.firstName + ' ' + currentUser.lastName;
            }

            if (profileEmail) {
                profileEmail.textContent = currentUser.email;
            }
        }

        // –ü–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è
        function showProfileMenu() {
            const menu = document.getElementById('profileMenu');
            if (menu.style.display === 'block') {
                menu.style.display = 'none';
            } else {
                menu.style.display = 'block';
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
                setTimeout(() => {
                    document.addEventListener('click', closeProfileMenuOutside);
                }, 100);
            }
        }

        function closeProfileMenuOutside(event) {
            const menu = document.getElementById('profileMenu');
            const icon = document.getElementById('profileIcon');

            if (!menu.contains(event.target) && !icon.contains(event.target)) {
                menu.style.display = 'none';
                document.removeEventListener('click', closeProfileMenuOutside);
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function toggleSettings() {
            window.location.href = 'settings.html';
        }

        // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
        function logout() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
                localStorage.removeItem('currentUser');
                window.location.href = 'index.html';
            }
        }

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏
        function showProjects() {
            currentSection = 'projects';
            updateNavigation();
            document.getElementById('projectsSection').style.display = 'block';
            document.getElementById('tasksSection').style.display = 'none';
            document.getElementById('deadlinesSection').style.display = 'none';
            updateFabButton();
            updateBottomNav('home');
        }

        function showTasks() {
            currentSection = 'tasks';
            updateNavigation();
            document.getElementById('projectsSection').style.display = 'none';
            document.getElementById('tasksSection').style.display = 'block';
            document.getElementById('deadlinesSection').style.display = 'none';
            loadUserTasks();
            updateFabButton();
            updateBottomNav('home');
        }

        function showDeadlines() {
            currentSection = 'deadlines';
            updateNavigation();
            document.getElementById('projectsSection').style.display = 'none';
            document.getElementById('tasksSection').style.display = 'none';
            document.getElementById('deadlinesSection').style.display = 'block';
            loadDeadlines();
            updateFabButton();
            updateBottomNav('home');
        }

        function updateNavigation() {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            if (currentSection === 'projects') {
                tabs[0].classList.add('active');
            } else if (currentSection === 'tasks') {
                tabs[1].classList.add('active');
            } else if (currentSection === 'deadlines') {
                tabs[2].classList.add('active');
            }
        }

        function updateBottomNav(activeItem) {
            const navItems = document.querySelectorAll('.bottom-nav .nav-item');
            navItems.forEach(item => item.classList.remove('active'));

            if (activeItem === 'home') {
                navItems[0].classList.add('active');
            } else if (activeItem === 'chats') {
                navItems[1].classList.add('active');
            } else if (activeItem === 'profile') {
                navItems[2].classList.add('active');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–∞–≤–∞—é—â–µ–π –∫–Ω–æ–ø–∫–∏
        function updateFabButton() {
            const fabButton = document.getElementById('fabButton');
            const icon = fabButton.querySelector('i');

            fabButton.style.display = 'flex';

            if (currentSection === 'projects') {
                fabButton.onclick = function() {
                    window.location.href = 'create-project.html';
                };
                icon.className = 'fas fa-plus';
                fabButton.title = '–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç';
            } else if (currentSection === 'tasks') {
                fabButton.onclick = function() {
                    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
                    openCreateTask();
                };
                icon.className = 'fas fa-plus';
                fabButton.title = '–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É';
            } else {
                fabButton.style.display = 'none';
            }
        }

        function handleFabClick() {
            if (currentSection === 'projects') {
                window.location.href = 'create-project.html';
            } else if (currentSection === 'tasks') {
                openCreateTask();
            }
        }

        function openCreateTask() {
            alert('–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç.');
            showProjects();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
        function loadProjects() {
            const projects = JSON.parse(localStorage.getItem('projects') || '[]');
            const currentUserEmail = currentUser?.email;

            // –§–∏–ª—å—Ç—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç—ã, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–º
            const userProjects = projects.filter(project => {
                if (!project.members) return false;
                return project.members.some(member =>
                    typeof member === 'string' &&
                    (member.includes(currentUser.firstName) ||
                     member.includes(currentUser.lastName) ||
                     member === currentUser.email)
                );
            });

            const projectsGrid = document.getElementById('projectsGrid');
            const emptyState = document.getElementById('projectsContainer');

            if (userProjects.length > 0) {
                emptyState.style.display = 'none';
                projectsGrid.style.display = 'grid';
                projectsGrid.innerHTML = '';

                userProjects.forEach(project => {
                    const projectCard = createProjectCard(project);
                    const cardElement = document.createElement('div');
                    cardElement.innerHTML = projectCard;
                    projectsGrid.appendChild(cardElement);

                    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
                    const card = cardElement.querySelector('.project-card');
                    if (card) {
                        card.style.cursor = 'pointer';
                        card.addEventListener('click', function(e) {
                            e.preventDefault();
                            openProject(project.id);
                        });
                    }
                });

                // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
                const createCard = document.createElement('div');
                createCard.innerHTML = `
                    <div class="project-card create-card">
                        <a href="create-project.html">
                            <i class="fas fa-plus"></i>
                            <h3>–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</h3>
                        </a>
                    </div>
                `;
                projectsGrid.appendChild(createCard);
            } else {
                emptyState.style.display = 'block';
                projectsGrid.style.display = 'none';
            }
        }

        function createProjectCard(project) {
            const members = project.members || [];
            const displayMembers = members.slice(0, 4);
            const extraMembers = members.length > 4 ? members.length - 4 : 0;

            const deadlineDate = new Date(project.deadline);
            const formattedDeadline = deadlineDate.toLocaleDateString('ru-RU', {
                day: 'numeric',
                month: 'long'
            });

            // –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–¥–∞—á
            let progress = project.progress || 0;
            if (project.tasks && project.tasks.length > 0) {
                const completedTasks = project.tasks.filter(task => task.completed).length;
                progress = Math.round((completedTasks / project.tasks.length) * 100);
            }

            return `
                <div class="project-card">
                    <div class="project-header">
                        <div class="project-icon">${project.icon || 'üìÅ'}</div>
                        <div>
                            <h3>${project.name}</h3>
                            <span class="project-field">${project.field}</span>
                        </div>
                    </div>

                    <div class="project-members-list">
                        ${displayMembers.map(member => {
                            const name = typeof member === 'string' ? member.split(' ')[0] : '–£—á–∞—Å—Ç–Ω–∏–∫';
                            return `<span class="project-member">${name}</span>`;
                        }).join('')}
                        ${extraMembers > 0 ?
                            `<span class="project-more">+${extraMembers}</span>` : ''}
                    </div>

                    <div class="project-deadline">
                        <i class="far fa-calendar-alt"></i>
                        –¥–æ ${formattedDeadline}
                    </div>

                    <div class="project-progress">
                        <div class="progress-bar">
                            <div class="progress" style="width: ${progress}%"></div>
                        </div>
                        <span>${progress}% –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                    </div>
                </div>
            `;
        }

        function openProject(projectId) {
            window.location.href = `project-details.html?id=${projectId}`;
        }

        function loadUserTasks() {
            const projects = JSON.parse(localStorage.getItem('projects') || '[]');
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));

            if (!currentUser) return;

            const userFullName = currentUser.firstName + ' ' + currentUser.lastName;
            const userEmail = currentUser.email;

            // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            let userTasks = [];
            projects.forEach(project => {
                if (project.tasks && Array.isArray(project.tasks)) {
                    project.tasks.forEach(task => {
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –ª–∏ –∑–∞–¥–∞—á–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                        const isAssigned = task.assignees && (
                            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –ø–æ–ª–Ω–æ–º—É –∏–º–µ–Ω–∏
                            task.assignees.some(assignee =>
                                assignee.includes(userFullName) ||
                                assignee.includes(currentUser.firstName) ||
                                assignee.includes(currentUser.lastName)
                            ) ||
                            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ email (–µ—Å–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –ø–æ –ø–æ—á—Ç–µ)
                            task.assignees.some(assignee => assignee === userEmail)
                        );

                        if (isAssigned) {
                            userTasks.push({
                                ...task,
                                projectName: project.name,
                                projectId: project.id,
                                projectIcon: project.icon || 'üìÅ'
                            });
                        }
                    });
                }
            });

            const tasksList = document.getElementById('tasksList');
            const emptyTasks = document.getElementById('emptyTasks');

            if (userTasks.length > 0) {
                emptyTasks.style.display = 'none';
                tasksList.style.display = 'flex';
                tasksList.style.flexDirection = 'column';
                tasksList.innerHTML = '';

                // –¶–≤–µ—Ç–∞ –¥–ª—è –∑–∞–¥–∞—á
                const taskColors = [
                    'var(--primary-color)',
                    'var(--accent-color)',
                    'var(--success-color)',
                    'var(--warning-color)',
                    'var(--danger-color)',
                    '#805ad5'
                ];

                userTasks.forEach((task, index) => {
                    const daysLeft = calculateDaysUntilDeadline(task.deadline);
                    const color = taskColors[index % taskColors.length];
                    let daysText = '';

                    if (daysLeft === '–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ') {
                        daysText = '<span style="color: var(--danger-color)">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ</span>';
                    } else if (daysLeft === '—Å–µ–≥–æ–¥–Ω—è') {
                        daysText = '<span style="color: var(--warning-color)">–°–µ–≥–æ–¥–Ω—è</span>';
                    } else if (daysLeft === '–∑–∞–≤—Ç—Ä–∞') {
                        daysText = '<span style="color: var(--warning-color)">–ó–∞–≤—Ç—Ä–∞</span>';
                    } else {
                        daysText = `${daysLeft} –¥–Ω–µ–π`;
                    }

                    // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É –¥–µ–¥–ª–∞–π–Ω–∞
                    let deadlineDate = '';
                    if (task.deadline) {
                        const date = new Date(task.deadline);
                        deadlineDate = date.toLocaleDateString('ru-RU', {
                            day: 'numeric',
                            month: 'short'
                        });
                    }

                    const taskItem = document.createElement('div');
                    taskItem.className = 'task-item';
                    taskItem.style.cssText = `--task-color: ${color};`;
                    taskItem.onclick = function() {
                        openTaskFromDashboard(task.projectId, task.id);
                    };
                    taskItem.innerHTML = `
                        <div class="task-color"></div>
                        <div class="task-content">
                            <h3>${task.title}</h3>
                            <div class="task-meta">
                                <span class="task-project">${task.projectName} ‚Ä¢ ${task.section}</span>
                                <span class="task-deadline">${daysText} ‚Ä¢ ${deadlineDate}</span>
                            </div>
                            ${task.description ? `<p class="task-description">${task.description}</p>` : ''}
                        </div>
                        <div class="task-actions">
                            <button class="task-action-btn" onclick="toggleTaskStatus(${task.id}, ${task.projectId}, event)" title="${task.completed ? '–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é' : '–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é'}">
                                <i class="fas ${task.completed ? 'fa-check-circle' : 'fa-circle'}"></i>
                            </button>
                        </div>
                    `;
                    tasksList.appendChild(taskItem);
                });
            } else {
                tasksList.style.display = 'none';
                emptyTasks.style.display = 'block';
                emptyTasks.innerHTML = `
                    <div class="empty-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <h2>–ù–µ—Ç –∑–∞–¥–∞—á</h2>
                    <p>–í–∞–º –µ—â–µ –Ω–µ –Ω–∞–∑–Ω–∞—á–∏–ª–∏ –∑–∞–¥–∞—á–∏ –∏–ª–∏ –≤—ã –Ω–µ —Å–æ–∑–¥–∞–ª–∏ –∏—Ö –≤ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö</p>
                    <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center;">
                        <a href="create-project.html" class="btn btn-primary">
                            <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
                        </a>
                        <button class="btn btn-secondary" onclick="showProjects()">
                            <i class="fas fa-briefcase"></i> –ú–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã
                        </button>
                    </div>
                `;
            }
        }

        function openTaskFromDashboard(projectId, taskId) {
            window.location.href = `task-details.html?projectId=${projectId}&taskId=${taskId}`;
        }

        function loadDeadlines() {
            const projects = JSON.parse(localStorage.getItem('projects') || '[]');
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));

            if (!currentUser) return;

            const userFullName = currentUser.firstName + ' ' + currentUser.lastName;
            const userEmail = currentUser.email;

            // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∑–∞–¥–∞—á–∏ —Å –¥–µ–¥–ª–∞–π–Ω–∞–º–∏
            let deadlines = [];
            projects.forEach(project => {
                if (project.tasks && Array.isArray(project.tasks)) {
                    project.tasks.forEach(task => {
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –ª–∏ –∑–∞–¥–∞—á–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                        const isAssigned = task.assignees && (
                            task.assignees.some(assignee =>
                                assignee.includes(userFullName) ||
                                assignee.includes(currentUser.firstName) ||
                                assignee.includes(currentUser.lastName)
                            ) ||
                            task.assignees.some(assignee => assignee === userEmail)
                        );

                        if (isAssigned && task.deadline) {
                            deadlines.push({
                                task: task.title,
                                deadline: task.deadline,
                                project: project.name,
                                completed: task.completed || false,
                                section: task.section,
                                projectId: project.id,
                                taskId: task.id
                            });
                        }
                    });
                }
            });

            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ –¥–µ–¥–ª–∞–π–Ω–∞
            deadlines.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));

            const deadlinesList = document.getElementById('deadlinesList');
            const emptyDeadlines = document.getElementById('emptyDeadlines');

            if (deadlines.length > 0) {
                emptyDeadlines.style.display = 'none';
                deadlinesList.style.display = 'flex';
                deadlinesList.style.flexDirection = 'column';
                deadlinesList.innerHTML = '';

                deadlines.forEach(item => {
                    const deadlineDate = new Date(item.deadline);
                    const formattedDate = deadlineDate.toLocaleDateString('ru-RU', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric'
                    });

                    // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è –µ—Å–ª–∏ –µ—Å—Ç—å
                    const timeString = deadlineDate.toLocaleTimeString('ru-RU', {
                        hour: '2-digit',
                        minute: '2-digit'
                    });

                    // –í—ã—á–∏—Å–ª—è–µ–º –¥–Ω–∏ –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞
                    const today = new Date();
                    today.setHours(0, 0, 0, 0);
                    deadlineDate.setHours(0, 0, 0, 0);
                    const diffTime = deadlineDate - today;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                    let statusClass = '';
                    let statusText = '';

                    if (item.completed) {
                        statusClass = 'completed';
                        statusText = '‚úì –í—ã–ø–æ–ª–Ω–µ–Ω–æ';
                    } else if (diffDays < 0) {
                        statusClass = 'overdue';
                        statusText = '‚ö† –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ';
                    } else if (diffDays === 0) {
                        statusClass = 'today';
                        statusText = '–°–µ–≥–æ–¥–Ω—è';
                    } else if (diffDays === 1) {
                        statusClass = 'tomorrow';
                        statusText = '–ó–∞–≤—Ç—Ä–∞';
                    } else if (diffDays <= 7) {
                        statusClass = 'week';
                        statusText = `–ß–µ—Ä–µ–∑ ${diffDays} –¥–Ω–µ–π`;
                    } else {
                        statusClass = 'future';
                        statusText = `–ß–µ—Ä–µ–∑ ${diffDays} –¥–Ω–µ–π`;
                    }

                    const deadlineItem = document.createElement('div');
                    deadlineItem.className = `deadline-item ${statusClass}`;
                    deadlineItem.onclick = function() {
                        openTaskFromDashboard(item.projectId, item.taskId);
                    };
                    deadlineItem.innerHTML = `
                        <div class="deadline-info">
                            <div class="deadline-task">
                                ${item.completed ? '<i class="fas fa-check-circle"></i>' : '<i class="far fa-circle"></i>'}
                                ${item.task}
                            </div>
                            <div class="deadline-project">${item.project} ‚Ä¢ ${item.section}</div>
                        </div>
                        <div class="deadline-dates">
                            <div class="deadline-date">${formattedDate}</div>
                            <div class="deadline-time">${timeString}</div>
                            <div class="deadline-status">${statusText}</div>
                        </div>
                    `;
                    deadlinesList.appendChild(deadlineItem);
                });
            } else {
                deadlinesList.style.display = 'none';
                emptyDeadlines.style.display = 'block';
                emptyDeadlines.innerHTML = `
                    <div class="empty-icon">
                        <i class="far fa-calendar-times"></i>
                    </div>
                    <h2>–ù–µ—Ç –¥–µ–¥–ª–∞–π–Ω–æ–≤</h2>
                    <p>–í–∞–º –µ—â–µ –Ω–µ –Ω–∞–∑–Ω–∞—á–∏–ª–∏ –∑–∞–¥–∞—á–∏ —Å –¥–µ–¥–ª–∞–π–Ω–∞–º–∏</p>
                    <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center;">
                        <a href="create-project.html" class="btn btn-primary">
                            <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –∑–∞–¥–∞—á–∞–º–∏
                        </a>
                        <button class="btn btn-secondary" onclick="showTasks()">
                            <i class="fas fa-tasks"></i> –ú–æ–∏ –∑–∞–¥–∞—á–∏
                        </button>
                    </div>
                `;
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function calculateDaysUntilDeadline(deadline) {
            if (!deadline) return '?';

            const deadlineDate = new Date(deadline);
            const today = new Date();

            // –°–±—Ä–æ—Å–∏—Ç—å –≤—Ä–µ–º—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –¥–∞—Ç
            today.setHours(0, 0, 0, 0);
            deadlineDate.setHours(0, 0, 0, 0);

            const diffTime = deadlineDate - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            if (diffDays < 0) return '–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ';
            if (diffDays === 0) return '—Å–µ–≥–æ–¥–Ω—è';
            if (diffDays === 1) return '–∑–∞–≤—Ç—Ä–∞';
            return `${diffDays} –¥–Ω–µ–π`;
        }

        function filterTasks(filterType) {
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => btn.classList.remove('active'));

            // –ù–∞—Ö–æ–¥–∏–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if ((filterType === 'all' && btn.textContent === '–í—Å–µ') ||
                    (filterType === 'today' && btn.textContent === '–°–µ–≥–æ–¥–Ω—è') ||
                    (filterType === 'week' && btn.textContent === '–ù–µ–¥–µ–ª—è')) {
                    btn.classList.add('active');
                }
            });

            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–¥–∞—á
            loadUserTasks();
        }

        function toggleTaskStatus(taskId, projectId, event) {
            event.stopPropagation(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –æ—Ç–∫—Ä—ã—Ç–∏–µ –∑–∞–¥–∞—á–∏

            const projects = JSON.parse(localStorage.getItem('projects') || '[]');
            let taskUpdated = false;

            for (let project of projects) {
                if (project.id === projectId && project.tasks && Array.isArray(project.tasks)) {
                    const taskIndex = project.tasks.findIndex(t => t.id === taskId);
                    if (taskIndex !== -1) {
                        project.tasks[taskIndex].completed = !project.tasks[taskIndex].completed;
                        taskUpdated = true;

                        // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ–µ–∫—Ç–∞
                        const totalTasks = project.tasks.length;
                        const completedTasks = project.tasks.filter(t => t.completed).length;
                        project.progress = Math.round((completedTasks / totalTasks) * 100);
                        break;
                    }
                }
            }

            if (taskUpdated) {
                localStorage.setItem('projects', JSON.stringify(projects));
                loadUserTasks();
                loadProjects();
                loadDeadlines();
            }
        }

        function loadInitialData() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
            if (!localStorage.getItem('settings')) {
                localStorage.setItem('settings', JSON.stringify({
                    notifications: true,
                    darkTheme: false,
                    soundEffects: true,
                    reminders: true,
                    language: 'ru'
                }));
            }
        }
    </script>

    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∏–∂–Ω–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            border-top: 1px solid var(--border-color);
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-secondary);
            font-size: 12px;
            transition: color 0.2s;
            padding: 4px 12px;
            border-radius: 8px;
        }

        .nav-item.active {
            color: var(--primary-color);
            background: var(--primary-light);
        }

        .nav-item i {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .nav-item span {
            font-size: 11px;
        }

        .footer-create {
            position: fixed;
            bottom: 70px;
            right: 20px;
            z-index: 99;
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –Ω–∏–∂–Ω—é—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é */
        .container {
            padding-bottom: 80px;
        }
    </style>
    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bottom-nav">
        <a href="dashboard.html" class="nav-item ${window.location.pathname.includes('dashboard') ? 'active' : ''}">
            <i class="fas fa-home nav-icon"></i>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </a>

        <a href="notifications.html" class="nav-item ${window.location.pathname.includes('notifications') ? 'active' : ''}">
            <i class="fas fa-bell nav-icon"></i>
            <span class="nav-label">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
            <span class="notification-badge" id="notificationCount"></span>
        </a>

        <a href="meetings.html" class="nav-item ${window.location.pathname.includes('meetings') ? 'active' : ''}">
            <i class="fas fa-phone-alt nav-icon"></i>
            <span class="nav-label">–°–æ–∑–≤–æ–Ω—ã</span>
        </a>

        <a href="project-chats.html" class="nav-item ${window.location.pathname.includes('chat') ? 'active' : ''}">
            <i class="fas fa-comments nav-icon"></i>
            <span class="nav-label">–ß–∞—Ç—ã</span>
        </a>
    </nav>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–π–¥–∂–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function updateNotificationBadge() {
            const notifications = JSON.parse(localStorage.getItem('notifications') || '[]');
            const unreadCount = notifications.filter(n => !n.read).length;
            const badge = document.getElementById('notificationCount');

            if (badge) {
                if (unreadCount > 0) {
                    badge.textContent = unreadCount;
                    badge.style.display = 'flex';
                } else {
                    badge.style.display = 'none';
                }
            }
        }

        // –í—ã–∑—ã–≤–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            updateNotificationBadge();
        });
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–π–¥–∂–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
        function updateNotificationBadge() {
            const notifications = JSON.parse(localStorage.getItem('notifications') || '[]');
            const unreadCount = notifications.filter(n => !n.read).length;
            const badge = document.getElementById('notificationCount');

            if (badge) {
                if (unreadCount > 0) {
                    badge.textContent = unreadCount;
                    badge.style.display = 'flex';
                } else {
                    badge.style.display = 'none';
                }
            }
        }

        // –í—ã–∑—ã–≤–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        updateNotificationBadge();
    </script>
</body>
</html>
